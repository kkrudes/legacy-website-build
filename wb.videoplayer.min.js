/* jQuery HTML5 Video Player Plugin for WYSIWYG Web Builder 15 - Copyright Pablo Software solutions 2019 - http://www.wysiwygwebbuilder.com */
(function(b){b.fn.videoplayer=function(f){var c=b.extend({title:"",description:"",showInfo:1,showFullscreen:1,showLargePlay:1,showTime:1,showVolume:1,sliderColor:"#FFFFFF",sliderHeight:3,sliderTrackerColor:"#0099FF",volumeValue:5,volumeWidth:100},f);return this.each(function(){b.videoplayer(b(this),c)})};b.videoplayer=function(f,c){function u(a){if(isNaN(a))return"--:--";var c=Math.floor(a/3600);a%=3600;var b=Math.floor(a/60);a=Math.floor(a%60);2>a.toString().length&&(a="0"+a);2>b.toString().length&&
(b="0"+b);return 0<c?c+":"+b+":"+a:b+":"+a}function v(a){1==r&&(a=a.pageX-h.offset().left,e.currentTime=e.duration*(a/h.width()))}function w(a){1==s&&(a=a.pageX-k.offset().left,c.volumeValue=1*(a/k.width()),e.volume=c.volumeValue)}function t(){e.paused?e.play():e.ended?(b(".large_button").hide(),e.currentTime=0,e.play(),m.attr("class","pause")):e.pause()}var e=f.get(0);c.volumeValue/=10;e.volume=c.volumeValue;var g=f.parent(),q=b('<div class="caption"><span class="title">'+c.title+'</span><br><span class="description">'+
c.description+"</span></div>");g.append(q);q.css("width","100%");q.css("box-sizing","border-box");q.css("-moz-box-sizing","border-box");if(c.showLargePlay){var p=b('<canvas class="large_button" width="100" height="100"></canvas>');g.append(p);p.css("margin","-50px");p.css("left","50%");p.css("top","50%");var n=p.get(0).getContext("2d");n.beginPath();n.moveTo(70,50);n.lineTo(30,70);n.lineTo(30,30);n.closePath();n.fillStyle="white";n.fill();p.bind("click",function(){t()})}var d=b('<div class="controls" />');
g.append(d);d.css("width","100%");var m=b('<button class="play"></button>');m.appendTo(d);var h=b('<canvas class="scrubber" width="1" height="'+c.sliderHeight.toString()+'"></canvas>');h.appendTo(d);if(c.showTime){var x=b('<span class="time">--:--:--&nbsp;/&nbsp;</span>');x.appendTo(d);var y=b('<span class="duration">--:--:--</span>');y.appendTo(d);f.bind("timeupdate",function(){y.html(u(e.duration));x.html(u(e.currentTime)+"&nbsp;|&nbsp;")})}if(c.showVolume){g=b('<button class="mute"></button>');
g.appendTo(d);var k=b('<canvas class="volume" width="'+c.volumeWidth.toString()+'" height="'+c.sliderHeight.toString()+'"></canvas>');k.appendTo(d);g.bind("click",function(){e.muted=!e.muted});k.get(0).getContext&&(k.bind("mousedown",function(a){s=1;w(a);k.bind("mousemove",function(a){w(a)})}),k.bind("mouseup",function(){s=0}),setInterval(function(){var a=k.get(0).getContext("2d");a.fillStyle=c.sliderColor;a.fillRect(0,0,k.width(),c.sliderHeight);a.fillStyle=c.sliderTrackerColor;var b=k.width()*c.volumeValue;
e.muted&&(b=0);for(var d=0;d<b;d+=8)a.fillRect(d,0,8,c.sliderHeight)},25))}c.showFullscreen&&(g=b('<button class="fullscreen"></button>'),g.appendTo(d),g.bind("click",function(){e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.requestFullScreen?e.requestFullScreen():alert("This browser does not support full screen mode.")}));c.showInfo&&(g=b('<button class="info"></button>'),g.appendTo(d),g.bind("click",function(){q.toggle()}));f.bind("play",
function(){b(".large_button").hide();m.attr("class","pause")});f.bind("pause",function(){b(".large_button").show();m.attr("class","play")});f.bind("ended",function(){b(".large_button").show();m.attr("class","play")});f.bind("click",function(){t()});f.bind("mouseover",function(){d.show()});d.bind("mouseover",function(){d.show()});f.bind("mouseout",function(){d.hide()});d.bind("mouseout",function(){d.hide()});m.bind("click",function(){t()});var l=f.width();d.children().each(function(){l-=b(this).outerWidth();
l-=parseInt(b(this).css("margin-left"),10);l-=parseInt(b(this).css("margin-right"),10)});var l=l-parseInt(m.css("margin-left"),10),r=0,s=0;e.paused||(b(".large_button").hide(),m.attr("class","pause"));h.get(0).getContext&&(h.get(0).width=l,h.bind("mousedown",function(a){r=1;v(a);h.bind("mousemove",function(a){v(a)})}),h.bind("mouseup",function(){r=0}),setInterval(function(){var a=h.get(0).getContext("2d");a.fillStyle=c.sliderColor;a.fillRect(0,0,h.width(),c.sliderHeight);a.fillStyle=c.sliderTrackerColor;
for(var b=h.width()*(e.currentTime/e.duration),d=0;d<=b;d+=8)a.fillRect(d,0,8,c.sliderHeight)},25))}})(jQuery);